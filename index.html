<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Focus Mode - Classroom Study Timer</title>

    <!-- Google Font: Roboto -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">

    <!-- Main Stylesheet -->
    <link rel="stylesheet" href="styles.css">
</head>

<body data-theme="space">
    <!-- Background overlay for dark mode -->
    <div class="background-overlay"></div>

    <!-- ========== TIMER (Top Center) ========== -->
    <div class="timer-container">
        <div class="timer-main">
            <h1 class="app-title">Focus Mode</h1>
            <div class="timer-arc-container">
                <svg class="timer-arc" viewBox="0 0 200 120">
                    <defs>
                        <linearGradient id="arcGradient" x1="0%" y1="0%" x2="100%" y2="0%">
                            <stop offset="0%" style="stop-color:#F5A55A"/>
                            <stop offset="50%" style="stop-color:#C53FC4"/>
                            <stop offset="100%" style="stop-color:#5F20C6"/>
                        </linearGradient>
                    </defs>
                    <!-- Background arc -->
                    <path class="timer-arc-bg" d="M20 100 A80 80 0 0 1 180 100" />
                    <!-- Progress arc -->
                    <path class="timer-arc-progress" id="timerArcProgress" d="M20 100 A80 80 0 0 1 180 100" />
                    <!-- Progress indicator emoji -->
                    <text class="timer-arc-indicator" id="timerArcIndicator" x="20" y="100" text-anchor="middle" dominant-baseline="middle">üõ∏</text>
                </svg>
                <div class="timer-display-wrapper">
                    <div class="timer-display timer-editable" id="timerDisplay" tabindex="0">05:00</div>
                    <input type="text" class="timer-edit-input" id="timerEditInput" pattern="[0-9:]*" maxlength="5" value="05:00">
                </div>
            </div>
            <div class="timer-controls" id="timerControls">
                <button class="timer-btn" id="startBtn" title="Start (Space)">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M8 5v14l11-7z" />
                    </svg>
                </button>
                <button class="timer-btn" id="pauseBtn" title="Pause (Space)" disabled>
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z" />
                    </svg>
                </button>
                <button class="timer-btn" id="resetBtn" title="Reset (R)">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z" />
                    </svg>
                </button>
            </div>
            <input type="hidden" id="minutesInput" value="5">
        </div>
    </div>

    <!-- ========== NOISE METER (Left) ========== -->
    <div class="noise-meter-container" id="noiseMeterContainer">
        <div class="component-box">
            <div class="gauge-container">
                <svg class="gauge" viewBox="0 0 100 60">
                    <path class="gauge-bg" d="M10,50 A40,40 0 0,1 90,50" />
                    <path class="gauge-fill" id="gaugeFill" d="M10,50 A40,40 0 0,1 90,50" />
                    <line class="gauge-threshold" id="gaugeThreshold" x1="50" y1="50" x2="50" y2="12" transform="rotate(36, 50, 50)" />
                    <text class="gauge-threshold-label" id="gaugeThresholdLabel" x="72" y="30" font-size="6">70%</text>
                    <line class="gauge-needle" id="gaugeNeedle" x1="50" y1="50" x2="50" y2="15" />
                    <circle class="gauge-center" cx="50" cy="50" r="4" />
                </svg>
                <span class="gauge-label">Noise Level</span>
            </div>
            <div class="sensitivity-control">
                <input type="range" id="sensitivitySlider" min="10" max="90" value="70" class="sensitivity-slider">
                <span class="sensitivity-label">Sensitivity: <span id="sensitivityValue">70</span>%</span>
            </div>
            <div class="mic-controls">
                <button class="component-btn" id="micBtn" title="Toggle Microphone">
                    <svg viewBox="0 0 24 24" fill="currentColor" id="micIcon">
                        <path d="M12 14c1.66 0 2.99-1.34 2.99-3L15 5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm5.3-3c0 3-2.54 5.1-5.3 5.1S6.7 14 6.7 11H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c3.28-.48 6-3.3 6-6.72h-1.7z" />
                    </svg>
                </button>
                <div class="noise-counter" title="Alert Count">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2zm6-6v-5c0-3.07-1.63-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.64 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2zm-2 1H8v-6c0-2.48 1.51-4.5 4-4.5s4 2.02 4 4.5v6z" />
                    </svg>
                    <span id="noiseCounter">0</span>
                </div>
            </div>
        </div>
    </div>

    <!-- ========== ANALOG CLOCK (Right) ========== -->
    <div class="clock-container" id="clockContainer">
        <div class="component-box">
            <div class="analog-clock">
                <div class="clock-face">
                    <span class="hour-marker marker-12">üöÄ</span>
                    <span class="hour-marker marker-3">üåü</span>
                    <span class="hour-marker marker-6">üåô</span>
                    <span class="hour-marker marker-9">ü™ê</span>
                    <div class="clock-hand hour-hand" id="hourHand"></div>
                    <div class="clock-hand minute-hand" id="minuteHand"></div>
                    <div class="clock-hand second-hand" id="secondHand"></div>
                    <div class="clock-center"></div>
                </div>
            </div>
            <span class="clock-label" id="digitalTime">12:00</span>
        </div>
    </div>

    <!-- ========== ROBOT (Center) ========== -->
    <div class="robot-container">
        <!-- Themed Robot Image -->
        <div class="robot-wrapper" id="robotWrapper">
            <img class="robot-image" id="robotImage" src="assets/robots/normal/space.png" alt="Robot">
            <div class="speech-bubble" id="speechBubble">
                <span id="speechText">Shhh!</span>
                <div class="speech-bubble-tail"></div>
            </div>
        </div>
    </div>

    <!-- ========== BOTTOM BAR (2 rows in single container) ========== -->
    <div class="bottom-bar-container">
        <!-- Row 1: Music and Theme -->
        <div class="bottom-bar-row">
            <button class="bar-btn" id="audioPlayBtn" title="Play Music">
                <svg viewBox="0 0 24 24" fill="currentColor" id="audioPlayIcon">
                    <path d="M8 5v14l11-7z" />
                </svg>
            </button>

            <select class="bar-select" id="radioChannel">
                <option value="https://ice1.somafm.com/groovesalad-128-mp3">Groove Salad (Chill)</option>
                <option value="https://ice1.somafm.com/dronezone-128-mp3">Drone Zone (Ambient)</option>
                <option value="https://ice1.somafm.com/deepspaceone-128-mp3">Deep Space One</option>
                <option value="https://ice1.somafm.com/spacestation-128-mp3">Space Station Soma</option>
                <option value="https://ice1.somafm.com/lush-128-mp3">Lush (Dreamy)</option>
                <option value="https://ice1.somafm.com/seventies-128-mp3">Left Coast 70s</option>
            </select>

            <div class="bar-divider"></div>

            <select class="bar-select theme-select" id="themeSelect">
                <option value="space">üöÄ Space</option>
                <option value="dinosaur">ü¶ñ Dinosaur</option>
                <option value="dance">üíÉ Dance</option>
                <option value="egypt">üèõÔ∏è Ancient Egypt</option>
                <option value="wizard">üßô Wizard</option>
                <option value="zombies">üßü Zombies</option>
                <option value="library">üìö Library</option>
            </select>
        </div>

        <!-- Row 2: Toggles -->
        <div class="bottom-bar-row">
            <button class="bar-btn toggle-btn" id="robotToggleBtn" title="Toggle Robot">
                <svg viewBox="0 0 24 24" fill="currentColor">
                    <path d="M12 2a2 2 0 0 1 2 2c0 .74-.4 1.39-1 1.73V7h1a7 7 0 0 1 7 7h1a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-1v1a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-1H2a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1h1a7 7 0 0 1 7-7h1V5.73c-.6-.34-1-.99-1-1.73a2 2 0 0 1 2-2M7.5 13a2.5 2.5 0 0 0 0 5 2.5 2.5 0 0 0 0-5m9 0a2.5 2.5 0 0 0 0 5 2.5 2.5 0 0 0 0-5z"/>
                </svg>
                <span class="btn-label">Robot</span>
            </button>

            <button class="bar-btn toggle-btn" id="noiseMeterToggleBtn" title="Toggle Noise Meter">
                <svg viewBox="0 0 24 24" fill="currentColor">
                    <path d="M12 14c1.66 0 2.99-1.34 2.99-3L15 5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm5.3-3c0 3-2.54 5.1-5.3 5.1S6.7 14 6.7 11H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c3.28-.48 6-3.3 6-6.72h-1.7z" />
                </svg>
                <span class="btn-label">Noise Meter</span>
            </button>

            <button class="bar-btn toggle-btn" id="clockToggleBtn" title="Toggle Clock">
                <svg viewBox="0 0 24 24" fill="currentColor">
                    <path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm.5-13H11v6l5.25 3.15.75-1.23-4.5-2.67z"/>
                </svg>
                <span class="btn-label">Clock</span>
            </button>
        </div>
    </div>

    <!-- HTML5 Audio element for Soma.fm -->
    <audio id="audioPlayer"></audio>

    <script src="app.js"></script>
</body>

</html>
